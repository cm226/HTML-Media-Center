version: "3.9" 
services:
  db:
    image: mariadb:10.7
    restart: always
    environment:
      MYSQL_ROOT_PASSWORD: root
    command: ["--port","3808"]
    ports:
      - "3808:3808"
    volumes:
      - ./db:/docker-entrypoint-initdb.d
      - ./mariadb:/var/lib/mysql
  media_dev:
    stdin_open: true
    tty: true
    environment:
      - build_type=Release
    ports:
      - "8442:8442"
      - "9091:9091"
    image: localhost:5000/media_dev
    build:
      context: .
      dockerfile: dockerfile
      args:
        - build_type=Debug
      target: Develop
    volumes:
      - /home/craig/Programming/Arsehole/HTML-Media-Center/:/home/craig/Programming/Server/HTML-Media-Center
    cap_add:
      - SYS_PTRACE
    security_opt:
      - seccomp:unconfined
    entrypoint: bash